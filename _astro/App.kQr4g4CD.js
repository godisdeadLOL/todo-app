import{s as Qe,a as ci,b as ai,c as Ae,d as vn,e as li,f as or,g as ui,h as ir,i as di,j as bt,k as yn,l as fi,m as hi,n as sr,o as mn,p as pi,q as nn,r as Pe,t as rn,u as gi}from"./index.95d291e9.DNX5jayA.js";import{r as vi,a as u,R as I,g as yi,b as mi}from"./index.DMn3Stj6.js";var on={exports:{}},Ze={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cr;function bi(){if(cr)return Ze;cr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,i){var s=null;if(i!==void 0&&(s=""+i),o.key!==void 0&&(s=""+o.key),"key"in o){i={};for(var c in o)c!=="key"&&(i[c]=o[c])}else i=o;return o=i.ref,{$$typeof:e,type:r,key:s,ref:o!==void 0?o:null,props:i}}return Ze.Fragment=t,Ze.jsx=n,Ze.jsxs=n,Ze}var ar;function xi(){return ar||(ar=1,on.exports=bi()),on.exports}var h=xi();const bn=["neutral","red","blue","green","yellow","purple"];function P(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var wi=typeof Symbol=="function"&&Symbol.observable||"@@observable",lr=wi,sn=()=>Math.random().toString(36).substring(7).split("").join("."),Ci={INIT:`@@redux/INIT${sn()}`,REPLACE:`@@redux/REPLACE${sn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sn()}`},Rt=Ci;function kn(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Ur(e,t,n){if(typeof e!="function")throw new Error(P(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(P(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(P(1));return n(Ur)(e,t)}let r=e,o=t,i=new Map,s=i,c=0,a=!1;function l(){s===i&&(s=new Map,i.forEach((v,x)=>{s.set(x,v)}))}function d(){if(a)throw new Error(P(3));return o}function f(v){if(typeof v!="function")throw new Error(P(4));if(a)throw new Error(P(5));let x=!0;l();const S=c++;return s.set(S,v),function(){if(x){if(a)throw new Error(P(6));x=!1,l(),s.delete(S),i=null}}}function p(v){if(!kn(v))throw new Error(P(7));if(typeof v.type>"u")throw new Error(P(8));if(typeof v.type!="string")throw new Error(P(17));if(a)throw new Error(P(9));try{a=!0,o=r(o,v)}finally{a=!1}return(i=s).forEach(S=>{S()}),v}function g(v){if(typeof v!="function")throw new Error(P(10));r=v,p({type:Rt.REPLACE})}function m(){const v=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(P(11));function S(){const w=x;w.next&&w.next(d())}return S(),{unsubscribe:v(S)}},[lr](){return this}}}return p({type:Rt.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:g,[lr]:m}}function Si(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Rt.INIT})>"u")throw new Error(P(12));if(typeof n(void 0,{type:Rt.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(P(13))})}function Gr(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const s=t[i];typeof e[s]=="function"&&(n[s]=e[s])}const r=Object.keys(n);let o;try{Si(n)}catch(i){o=i}return function(s={},c){if(o)throw o;let a=!1;const l={};for(let d=0;d<r.length;d++){const f=r[d],p=n[f],g=s[f],m=p(g,c);if(typeof m>"u")throw c&&c.type,new Error(P(14));l[f]=m,a=a||m!==g}return a=a||r.length!==Object.keys(s).length,a?l:s}}function jt(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Ei(...e){return t=>(n,r)=>{const o=t(n,r);let i=()=>{throw new Error(P(15))};const s={getState:o.getState,dispatch:(a,...l)=>i(a,...l)},c=e.map(a=>a(s));return i=jt(...c)(o.dispatch),{...o,dispatch:i}}}function Di(e){return kn(e)&&"type"in e&&typeof e.type=="string"}var Xr=Symbol.for("immer-nothing"),ur=Symbol.for("immer-draftable"),G=Symbol.for("immer-state");function Z(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Be=Object.getPrototypeOf;function De(e){return!!e&&!!e[G]}function he(e){return e?Vr(e)||Array.isArray(e)||!!e[ur]||!!e.constructor?.[ur]||Ut(e)||Gt(e):!1}var Ri=Object.prototype.constructor.toString();function Vr(e){if(!e||typeof e!="object")return!1;const t=Be(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ri}function It(e,t){Wt(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Wt(e){const t=e[G];return t?t.type_:Array.isArray(e)?1:Ut(e)?2:Gt(e)?3:0}function xn(e,t){return Wt(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Kr(e,t,n){const r=Wt(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function ji(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ut(e){return e instanceof Map}function Gt(e){return e instanceof Set}function Ee(e){return e.copy_||e.base_}function wn(e,t){if(Ut(e))return new Map(e);if(Gt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Vr(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[G];let o=Reflect.ownKeys(r);for(let i=0;i<o.length;i++){const s=o[i],c=r[s];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[s]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[s]})}return Object.create(Be(e),r)}else{const r=Be(e);if(r!==null&&n)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function Nn(e,t=!1){return Xt(e)||De(e)||!he(e)||(Wt(e)>1&&(e.set=e.add=e.clear=e.delete=Ii),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Nn(r,!0))),e}function Ii(){Z(2)}function Xt(e){return Object.isFrozen(e)}var Oi={};function Re(e){const t=Oi[e];return t||Z(0,e),t}var ot;function Hr(){return ot}function Ti(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dr(e,t){t&&(Re("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cn(e){Sn(e),e.drafts_.forEach(ki),e.drafts_=null}function Sn(e){e===ot&&(ot=e.parent_)}function fr(e){return ot=Ti(ot,e)}function ki(e){const t=e[G];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hr(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[G].modified_&&(Cn(t),Z(4)),he(e)&&(e=Ot(t,e),t.parent_||Tt(t,e)),t.patches_&&Re("Patches").generateReplacementPatches_(n[G].base_,e,t.patches_,t.inversePatches_)):e=Ot(t,n,[]),Cn(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Xr?e:void 0}function Ot(e,t,n){if(Xt(t))return t;const r=t[G];if(!r)return It(t,(o,i)=>pr(e,r,t,o,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Tt(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,s=!1;r.type_===3&&(i=new Set(o),o.clear(),s=!0),It(i,(c,a)=>pr(e,r,o,c,a,n,s)),Tt(e,o,!1),n&&e.patches_&&Re("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function pr(e,t,n,r,o,i,s){if(De(o)){const c=i&&t&&t.type_!==3&&!xn(t.assigned_,r)?i.concat(r):void 0,a=Ot(e,o,c);if(Kr(n,r,a),De(a))e.canAutoFreeze_=!1;else return}else s&&n.add(o);if(he(o)&&!Xt(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ot(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Tt(e,o)}}function Tt(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Nn(t,n)}function Ni(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Hr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=Mn;n&&(o=[r],i=it);const{revoke:s,proxy:c}=Proxy.revocable(o,i);return r.draft_=c,r.revoke_=s,c}var Mn={get(e,t){if(t===G)return e;const n=Ee(e);if(!xn(n,t))return Mi(e,n,t);const r=n[t];return e.finalized_||!he(r)?r:r===cn(e.base_,t)?(an(e),e.copy_[t]=Dn(r,e)):r},has(e,t){return t in Ee(e)},ownKeys(e){return Reflect.ownKeys(Ee(e))},set(e,t,n){const r=Yr(Ee(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=cn(Ee(e),t),i=o?.[G];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(ji(n,o)&&(n!==void 0||xn(e.base_,t)))return!0;an(e),En(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return cn(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,an(e),En(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ee(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Z(11)},getPrototypeOf(e){return Be(e.base_)},setPrototypeOf(){Z(12)}},it={};It(Mn,(e,t)=>{it[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});it.deleteProperty=function(e,t){return it.set.call(this,e,t,void 0)};it.set=function(e,t,n){return Mn.set.call(this,e[0],t,n,e[0])};function cn(e,t){const n=e[G];return(n?Ee(n):e)[t]}function Mi(e,t,n){const r=Yr(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function Yr(e,t){if(!(t in e))return;let n=Be(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Be(n)}}function En(e){e.modified_||(e.modified_=!0,e.parent_&&En(e.parent_))}function an(e){e.copy_||(e.copy_=wn(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _i=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(a=i,...l){return s.produce(a,d=>n.call(this,d,...l))}}typeof n!="function"&&Z(6),r!==void 0&&typeof r!="function"&&Z(7);let o;if(he(t)){const i=fr(this),s=Dn(t,void 0);let c=!0;try{o=n(s),c=!1}finally{c?Cn(i):Sn(i)}return dr(i,r),hr(o,i)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===Xr&&(o=void 0),this.autoFreeze_&&Nn(o,!0),r){const i=[],s=[];Re("Patches").generateReplacementPatches_(t,o,i,s),r(i,s)}return o}else Z(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...c)=>this.produceWithPatches(s,a=>t(a,...c));let r,o;return[this.produce(t,n,(s,c)=>{r=s,o=c}),r,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){he(e)||Z(8),De(e)&&(e=Ai(e));const t=fr(this),n=Dn(e,void 0);return n[G].isManual_=!0,Sn(t),n}finishDraft(e,t){const n=e&&e[G];(!n||!n.isManual_)&&Z(9);const{scope_:r}=n;return dr(r,t),hr(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=Re("Patches").applyPatches_;return De(e)?r(e,t):this.produce(e,o=>r(o,t))}};function Dn(e,t){const n=Ut(e)?Re("MapSet").proxyMap_(e,t):Gt(e)?Re("MapSet").proxySet_(e,t):Ni(e,t);return(t?t.scope_:Hr()).drafts_.push(n),n}function Ai(e){return De(e)||Z(10,e),qr(e)}function qr(e){if(!he(e)||Xt(e))return e;const t=e[G];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=wn(e,t.scope_.immer_.useStrictShallowCopy_)}else n=wn(e,!0);return It(n,(r,o)=>{Kr(n,r,qr(o))}),t&&(t.finalized_=!1),n}var X=new _i,Jr=X.produce;X.produceWithPatches.bind(X);X.setAutoFreeze.bind(X);X.setUseStrictShallowCopy.bind(X);X.applyPatches.bind(X);X.createDraft.bind(X);X.finishDraft.bind(X);function Qr(e){return({dispatch:n,getState:r})=>o=>i=>typeof i=="function"?i(n,r,e):o(i)}var Pi=Qr(),Li=Qr,zi=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jt:jt.apply(null,arguments)};function gr(e,t){function n(...r){if(t){let o=t(...r);if(!o)throw new Error(fe(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Di(r)&&r.type===e,n}var Zr=class et extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,et.prototype)}static get[Symbol.species](){return et}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new et(...t[0].concat(this)):new et(...t.concat(this))}};function vr(e){return he(e)?Jr(e,()=>{}):e}function xt(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Bi(e){return typeof e=="boolean"}var $i=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:o=!0,actionCreatorCheck:i=!0}=t??{};let s=new Zr;return n&&(Bi(n)?s.push(Pi):s.push(Li(n.extraArgument))),s},Fi="RTK_autoBatch",yr=e=>t=>{setTimeout(t,e)},Wi=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let o=!0,i=!1,s=!1;const c=new Set,a=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:yr(10):e.type==="callback"?e.queueNotification:yr(e.timeout),l=()=>{s=!1,i&&(i=!1,c.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const f=()=>o&&d(),p=r.subscribe(f);return c.add(d),()=>{p(),c.delete(d)}},dispatch(d){try{return o=!d?.meta?.[Fi],i=!o,i&&(s||(s=!0,a(l))),r.dispatch(d)}finally{o=!0}}})},Ui=e=>function(n){const{autoBatch:r=!0}=n??{};let o=new Zr(e);return r&&o.push(Wi(typeof r=="object"?r:void 0)),o};function Gi(e){const t=$i(),{reducer:n=void 0,middleware:r,devTools:o=!0,preloadedState:i=void 0,enhancers:s=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(kn(n))c=Gr(n);else throw new Error(fe(1));let a;typeof r=="function"?a=r(t):a=t();let l=jt;o&&(l=zi({trace:!1,...typeof o=="object"&&o}));const d=Ei(...a),f=Ui(d);let p=typeof s=="function"?s(f):f();const g=l(...p);return Ur(c,i,g)}function eo(e){const t={},n=[];let r;const o={addCase(i,s){const c=typeof i=="string"?i:i.type;if(!c)throw new Error(fe(28));if(c in t)throw new Error(fe(29));return t[c]=s,o},addMatcher(i,s){return n.push({matcher:i,reducer:s}),o},addDefaultCase(i){return r=i,o}};return e(o),[t,n,r]}function Xi(e){return typeof e=="function"}function Vi(e,t){let[n,r,o]=eo(t),i;if(Xi(e))i=()=>vr(e());else{const c=vr(e);i=()=>c}function s(c=i(),a){let l=[n[a.type],...r.filter(({matcher:d})=>d(a)).map(({reducer:d})=>d)];return l.filter(d=>!!d).length===0&&(l=[o]),l.reduce((d,f)=>{if(f)if(De(d)){const g=f(d,a);return g===void 0?d:g}else{if(he(d))return Jr(d,p=>f(p,a));{const p=f(d,a);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},c)}return s.getInitialState=i,s}var Ki="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Hi=(e=21)=>{let t="",n=e;for(;n--;)t+=Ki[Math.random()*64|0];return t},Yi=Symbol.for("rtk-slice-createasyncthunk");function qi(e,t){return`${e}/${t}`}function Ji({creators:e}={}){const t=e?.asyncThunk?.[Yi];return function(r){const{name:o,reducerPath:i=o}=r;if(!o)throw new Error(fe(11));const s=(typeof r.reducers=="function"?r.reducers(Zi()):r.reducers)||{},c=Object.keys(s),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(b,w){const C=typeof b=="string"?b:b.type;if(!C)throw new Error(fe(12));if(C in a.sliceCaseReducersByType)throw new Error(fe(13));return a.sliceCaseReducersByType[C]=w,l},addMatcher(b,w){return a.sliceMatchers.push({matcher:b,reducer:w}),l},exposeAction(b,w){return a.actionCreators[b]=w,l},exposeCaseReducer(b,w){return a.sliceCaseReducersByName[b]=w,l}};c.forEach(b=>{const w=s[b],C={reducerName:b,type:qi(o,b),createNotation:typeof r.reducers=="function"};ts(w)?rs(C,w,l,t):es(C,w,l)});function d(){const[b={},w=[],C=void 0]=typeof r.extraReducers=="function"?eo(r.extraReducers):[r.extraReducers],R={...b,...a.sliceCaseReducersByType};return Vi(r.initialState,D=>{for(let E in R)D.addCase(E,R[E]);for(let E of a.sliceMatchers)D.addMatcher(E.matcher,E.reducer);for(let E of w)D.addMatcher(E.matcher,E.reducer);C&&D.addDefaultCase(C)})}const f=b=>b,p=new Map,g=new WeakMap;let m;function y(b,w){return m||(m=d()),m(b,w)}function v(){return m||(m=d()),m.getInitialState()}function x(b,w=!1){function C(D){let E=D[b];return typeof E>"u"&&w&&(E=xt(g,C,v)),E}function R(D=f){const E=xt(p,w,()=>new WeakMap);return xt(E,D,()=>{const k={};for(const[N,O]of Object.entries(r.selectors??{}))k[N]=Qi(O,D,()=>xt(g,D,v),w);return k})}return{reducerPath:b,getSelectors:R,get selectors(){return R(C)},selectSlice:C}}const S={name:o,reducer:y,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:v,...x(i),injectInto(b,{reducerPath:w,...C}={}){const R=w??i;return b.inject({reducerPath:R,reducer:y},C),{...S,...x(R,!0)}}};return S}}function Qi(e,t,n,r){function o(i,...s){let c=t(i);return typeof c>"u"&&r&&(c=n()),e(c,...s)}return o.unwrapped=e,o}var to=Ji();function Zi(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function es({type:e,reducerName:t,createNotation:n},r,o){let i,s;if("reducer"in r){if(n&&!ns(r))throw new Error(fe(17));i=r.reducer,s=r.prepare}else i=r;o.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,s?gr(e,s):gr(e))}function ts(e){return e._reducerDefinitionType==="asyncThunk"}function ns(e){return e._reducerDefinitionType==="reducerWithPrepare"}function rs({type:e,reducerName:t},n,r,o){if(!o)throw new Error(fe(18));const{payloadCreator:i,fulfilled:s,pending:c,rejected:a,settled:l,options:d}=n,f=o(e,i,d);r.exposeAction(t,f),s&&r.addCase(f.fulfilled,s),c&&r.addCase(f.pending,c),a&&r.addCase(f.rejected,a),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:s||wt,pending:c||wt,rejected:a||wt,settled:l||wt})}function wt(){}function fe(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const os=[],no=to({name:"tags",initialState:os,reducers:{addTag:{reducer(e,t){const n=t.payload;e.push({...n,content:n.content?n.content:`Новый тег ${e.length+1}`})},prepare(e=void 0){return{payload:{id:Hi(),content:e??"",color:bn[Math.floor(Math.random()*bn.length)]}}}},updateTag(e,t){const n=t.payload;return e.map(r=>r.id===n.id?{...r,...n}:r)},deleteTag(e,t){const n=t.payload;return e.filter(r=>r.id!==n)},reorderTag(e,t){const{fromId:n,toId:r}=t.payload,o=e.findIndex(c=>c.id===n),i=e.findIndex(c=>c.id===r),[s]=e.splice(o,1);e.splice(i,0,s)}}}),{addTag:is,deleteTag:ss,updateTag:mr,reorderTag:cs}=no.actions,as=no.reducer,ls="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let br=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=ls[n[e]&63];return t};const us=[{id:"todo",title:"Сделать",todos:[],color:"blue"},{id:"progress",title:"В процессе",todos:[],color:"yellow"},{id:"completed",title:"Завершены",todos:[],color:"green"}],ro=to({name:"todos",initialState:us,reducers:{addTodo:{reducer(e,t){const{groupId:n,todo:r}=t.payload;e.find(i=>i.id===n).todos.push(r)},prepare(e){return{payload:{groupId:e,todo:{id:br(),title:"Новая задача",content:"",createdAt:new Date().toISOString(),steps:[],tagIds:[]}}}}},updateTodo(e,t){const{groupId:n,todo:r}=t.payload,o=e.find(i=>i.id===n);o.todos=o.todos.map(i=>i.id===r.id?{...i,...r}:i)},deleteTodo(e,t){const{groupId:n,todoId:r}=t.payload,o=e.find(i=>i.id===n);o.todos=o.todos.filter(i=>i.id!==r)},reorderTodo(e,t){const{fromGroupId:n,fromTodoId:r,toGroupId:o,toTodoId:i,mode:s}=t.payload,c=e.find(p=>p.id===n),a=e.find(p=>p.id===o),l=c.todos.findIndex(p=>p.id===r),d=i?a.todos.findIndex(p=>p.id===i):s==="prepend"?0:a.todos.length,[f]=c.todos.splice(l,1);a.todos.splice(d,0,f)},addTodoStep:{reducer(e,t){const{groupId:n,todoId:r,step:o}=t.payload;e.find(c=>c.id===n).todos.find(c=>c.id===r).steps.push(o)},prepare(e,t){return{payload:{groupId:e,todoId:t,step:{id:br(),content:"Новый шаг",checked:!1}}}}},updateTodoStep(e,t){const{groupId:n,todoId:r,step:o}=t.payload,s=e.find(c=>c.id===n).todos.find(c=>c.id===r);s.steps=s.steps.map(c=>c.id===o.id?{...c,...o}:c)},deleteTodoStep(e,t){const{groupId:n,todoId:r,stepId:o}=t.payload,s=e.find(c=>c.id===n).todos.find(c=>c.id===r);s.steps=s.steps.filter(c=>c.id!==o)},reorderTodoStep(e,t){const{groupId:n,todoId:r,fromId:o,toId:i}=t.payload,c=e.find(f=>f.id===n).todos.find(f=>f.id===r),a=c.steps.findIndex(f=>f.id===o),l=c.steps.findIndex(f=>f.id===i),[d]=c.steps.splice(a,1);c.steps.splice(l,0,d)},toggleTodoTag(e,t){const{groupId:n,todoId:r,tagId:o}=t.payload,s=e.find(a=>a.id===n).todos.find(a=>a.id===r);!!s.tagIds.includes(o)?s.tagIds=s.tagIds.filter(a=>a!==o):s.tagIds.push(o)}}}),{addTodo:ds,updateTodo:xr,deleteTodo:fs,reorderTodo:Rn,addTodoStep:hs,updateTodoStep:wr,deleteTodoStep:ps,reorderTodoStep:gs,toggleTodoTag:oo}=ro.actions,vs=ro.reducer;function ys(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):void 0}catch{return}}async function ms(e,t){try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch{}}const bs=Gr({todos:vs,tags:as}),jn=Gi({reducer:bs,preloadedState:ys("redux")});jn.subscribe(()=>{ms("redux",jn.getState())});var ln={exports:{}},un={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr;function xs(){if(Cr)return un;Cr=1;var e=vi();function t(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,o=e.useRef,i=e.useEffect,s=e.useMemo,c=e.useDebugValue;return un.useSyncExternalStoreWithSelector=function(a,l,d,f,p){var g=o(null);if(g.current===null){var m={hasValue:!1,value:null};g.current=m}else m=g.current;g=s(function(){function v(C){if(!x){if(x=!0,S=C,C=f(C),p!==void 0&&m.hasValue){var R=m.value;if(p(R,C))return b=R}return b=C}if(R=b,n(S,C))return R;var D=f(C);return p!==void 0&&p(R,D)?(S=C,R):(S=C,b=D)}var x=!1,S,b,w=d===void 0?null:d;return[function(){return v(l())},w===null?void 0:function(){return v(w())}]},[l,d,f,p]);var y=r(a,g[0],g[1]);return i(function(){m.hasValue=!0,m.value=y},[y]),c(y),y},un}var Sr;function ws(){return Sr||(Sr=1,ln.exports=xs()),ln.exports}var Cs=ws();function Ss(e){e()}function Es(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Ss(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!r||e===null||(r=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var Er={notify(){},get:()=>[]};function Ds(e,t){let n,r=Er,o=0,i=!1;function s(y){d();const v=r.subscribe(y);let x=!1;return()=>{x||(x=!0,v(),f())}}function c(){r.notify()}function a(){m.onStateChange&&m.onStateChange()}function l(){return i}function d(){o++,n||(n=e.subscribe(a),r=Es())}function f(){o--,n&&o===0&&(n(),n=void 0,r.clear(),r=Er)}function p(){i||(i=!0,d())}function g(){i&&(i=!1,f())}const m={addNestedSub:s,notifyNestedSubs:c,handleChangeWrapper:a,isSubscribed:l,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>r};return m}var Rs=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",js=Rs(),Is=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Os=Is(),Ts=()=>js||Os?u.useLayoutEffect:u.useEffect,ks=Ts(),Ns=Symbol.for("react-redux-context"),Ms=typeof globalThis<"u"?globalThis:{};function _s(){if(!u.createContext)return{};const e=Ms[Ns]??=new Map;let t=e.get(u.createContext);return t||(t=u.createContext(null),e.set(u.createContext,t)),t}var we=_s();function As(e){const{children:t,context:n,serverState:r,store:o}=e,i=u.useMemo(()=>{const a=Ds(o);return{store:o,subscription:a,getServerState:r?()=>r:void 0}},[o,r]),s=u.useMemo(()=>o.getState(),[o]);ks(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==o.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const c=n||we;return u.createElement(c.Provider,{value:i},t)}var Ps=As;function _n(e=we){return function(){return u.useContext(e)}}var io=_n();function so(e=we){const t=e===we?io:_n(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Ls=so();function zs(e=we){const t=e===we?Ls:so(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Bs=zs(),$s=(e,t)=>e===t;function Fs(e=we){const t=e===we?io:_n(e),n=(r,o={})=>{const{equalityFn:i=$s}=typeof o=="function"?{equalityFn:o}:o,s=t(),{store:c,subscription:a,getServerState:l}=s;u.useRef(!0);const d=u.useCallback({[r.name](p){return r(p)}}[r.name],[r]),f=Cs.useSyncExternalStoreWithSelector(a.addNestedSub,c.getState,l||c.getState,d,i);return u.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var Ws=Fs();const Ce=Bs.withTypes(),Vt=Ws.withTypes();function kt({onValueUpdate:e,value:t,required:n=!1,element:r}){const[o,i]=u.useState(!1),[s,c]=u.useState(t);return u.useEffect(()=>{o||c(t)},[t,o]),r(s,()=>{i(!0)},f=>{const p=f.target;c(p.value)},()=>{(!n||s)&&e(s),i(!1)})}var co={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Dr=I.createContext&&I.createContext(co),Us=["attr","size","title"];function Gs(e,t){if(e==null)return{};var n=Xs(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xs(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nt.apply(this,arguments)}function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rr(Object(n),!0).forEach(function(r){Vs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vs(e,t,n){return t=Ks(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ks(e){var t=Hs(e,"string");return typeof t=="symbol"?t:t+""}function Hs(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ao(e){return e&&e.map((t,n)=>I.createElement(t.tag,Mt({key:n},t.attr),ao(t.child)))}function V(e){return t=>I.createElement(Ys,Nt({attr:Mt({},e.attr)},t),ao(e.child))}function Ys(e){var t=n=>{var{attr:r,size:o,title:i}=e,s=Gs(e,Us),c=o||n.size||"1em",a;return n.className&&(a=n.className),e.className&&(a=(a?a+" ":"")+e.className),I.createElement("svg",Nt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:a,style:Mt(Mt({color:e.color||n.color},n.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&I.createElement("title",null,i),e.children)};return Dr!==void 0?I.createElement(Dr.Consumer,null,n=>t(n)):t(co)}function qs(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 19-7-7 7-7"},child:[]},{tag:"path",attr:{d:"M19 12H5"},child:[]}]})(e)}function Js(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12h14"},child:[]},{tag:"path",attr:{d:"m12 5 7 7-7 7"},child:[]}]})(e)}function lo(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m6 9 6 6 6-6"},child:[]}]})(e)}function uo(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m18 15-6-6-6 6"},child:[]}]})(e)}function Qs(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(e)}function Zs(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"9",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"9",cy:"19",r:"1"},child:[]},{tag:"circle",attr:{cx:"15",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"15",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"15",cy:"19",r:"1"},child:[]}]})(e)}function ec(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"19",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"19",r:"1"},child:[]}]})(e)}function fo(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12h14"},child:[]}]})(e)}function at(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12h14"},child:[]},{tag:"path",attr:{d:"M12 5v14"},child:[]}]})(e)}function tc(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"path",attr:{d:"m21 21-4.3-4.3"},child:[]}]})(e)}function nc(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"},child:[]},{tag:"path",attr:{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor"},child:[]}]})(e)}function ho(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 6h18"},child:[]},{tag:"path",attr:{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},child:[]},{tag:"path",attr:{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},child:[]}]})(e)}function An(e){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(e)}var dn={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var jr;function rc(){return jr||(jr=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",s=0;s<arguments.length;s++){var c=arguments[s];c&&(i=o(i,r(c)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var c in i)t.call(i,c)&&i[c]&&(s=o(s,c));return s}function o(i,s){return s?i?i+" "+s:i+s:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(dn)),dn.exports}var oc=rc();const K=yi(oc);function _t({label:e,fallback:t,small:n=!1,plainable:r=!1,allowMultiline:o=!1,value:i,onChange:s,className:c,...a}){const l=g=>{g.style.height="auto",g.style.height=`${g.scrollHeight}px`},d=g=>{l(g.target),s?.(g)},f=g=>{g.key==="Enter"&&(!g.shiftKey||!o)&&(g.target.blur(),g.preventDefault())},p=u.useRef(null);return u.useEffect(()=>{p.current&&l(p.current)},[i]),u.useEffect(()=>{const g=()=>{p.current&&l(p.current)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[p.current]),h.jsxs("div",{className:K(c,Qe.fieldWrapper,n?Qe.small:"",r?Qe.plainable:""),children:[h.jsx("textarea",{onKeyDown:f,rows:1,value:i,onChange:d,ref:p,placeholder:t??" ",spellCheck:!1,className:Qe.field,...a}),e&&h.jsx("div",{className:Qe.label,children:e??""})]})}function po({expanded:e=!0,className:t,children:n}){const[r,o]=u.useState(e),i=u.useRef(null);return u.useEffect(()=>{if(e&&o(!0),!i.current)return;const s=()=>{e||o(!1)},c=i.current;return c.addEventListener("transitionend",s),()=>c.removeEventListener("transitionend",s)},[e]),h.jsx("div",{ref:i,"data-expanded":e,className:K(ci.expandable,t),children:r&&n})}function $e({className:e,children:t,...n}){return h.jsx("button",{className:K(e,ai.iconButton),...n,children:t})}function Pn({toogled:e,elementOn:t,elementOff:n,...r}){return h.jsx($e,{...r,children:e?t:n})}var Le=mi();function Ln(e){const t=u.useRef(null);return u.useEffect(()=>{const n=r=>{if(!t.current)return;const{pageX:o,pageY:i}=r,c=t.current.getBoundingClientRect();o>c.left&&o<c.right&&i>c.top&&i<c.bottom||e?.()};return window.addEventListener("mousedown",n),()=>window.removeEventListener("mousedown",n)},[]),t}function go({open:e,setOpen:t,triggerElement:n,title:r,className:o,children:i}){const[s,c]=u.useState(!1),a=e??s,l=t??c,d=document.getElementById("dialog-root"),f=Ln(()=>l(!1));return h.jsxs(h.Fragment,{children:[n?.(()=>l(!0)),a&&Le.createPortal(h.jsxs("div",{className:Ae.dialogWrapper,children:[h.jsx("div",{className:Ae.backdrop}),h.jsx("div",{className:Ae.positioner,children:h.jsxs("div",{className:K(Ae.dialog,o),ref:f,children:[h.jsxs("div",{className:Ae.headerBlock,children:[h.jsx("h1",{children:r}),h.jsx($e,{onClick:()=>l(!1),children:h.jsx(An,{})})]}),h.jsx("div",{className:Ae.contentBlock,children:i})]})})]}),d)]})}function Ir({color:e,className:t,...n}){return h.jsx("button",{className:K(vn.colorItem,t,e),...n})}function ic({value:e,onChange:t}){const[n,r]=u.useState(!1),o=Ln(()=>r(!1)),i=s=>{t(s),r(!1)};return h.jsxs("div",{ref:o,className:vn.colorPicker,children:[h.jsx(Ir,{color:e,onClick:()=>r(!0)}),n&&h.jsx("div",{className:vn.menu,children:bn.map(s=>h.jsx(Ir,{"data-selected":s===e,onClick:()=>i(s),color:s},s))})]})}function At({className:e,children:t,...n}){return h.jsx("button",{className:K(li.button,e),...n,children:t})}function vo({open:e,setOpen:t,onConfirm:n,title:r,message:o,triggerElement:i}){const[s,c]=u.useState(!1),a=e??s,l=t??c,d=()=>{n(),l(!1)};return h.jsxs(go,{open:a,setOpen:l,title:r,triggerElement:i,children:[h.jsx("div",{className:or.messageBlock,children:o}),h.jsxs("div",{className:or.buttonsBlock,children:[h.jsx(At,{onClick:d,children:"Подтвердить"}),h.jsx(At,{onClick:()=>l(!1),children:"Отмена"})]})]})}const yo=u.createContext(void 0);function mo({children:e,todoData:t}){return h.jsxs(yo.Provider,{value:t,children:[" ",e," "]})}function je(){return u.useContext(yo)}const bo=u.createContext(void 0);function Or({children:e,groupData:t}){return h.jsxs(bo.Provider,{value:t,children:[" ",e," "]})}function Ie(){return u.useContext(bo)}const zn=u.forwardRef(({variant:e="vertical",...t},n)=>h.jsxs("div",{className:ui.gripHandle,ref:n,...t,children:[e==="vertical"&&h.jsx(Zs,{}),e==="all"&&h.jsx(ec,{})]}));function sc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const Kt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Fe(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Bn(e){return"nodeType"in e}function z(e){var t,n;return e?Fe(e)?e:Bn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function $n(e){const{Document:t}=z(e);return e instanceof t}function lt(e){return Fe(e)?!1:e instanceof z(e).HTMLElement}function xo(e){return e instanceof z(e).SVGElement}function We(e){return e?Fe(e)?e.document:Bn(e)?$n(e)?e:lt(e)||xo(e)?e.ownerDocument:document:document:document}const ee=Kt?u.useLayoutEffect:u.useEffect;function Ht(e){const t=u.useRef(e);return ee(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function cc(){const e=u.useRef(null),t=u.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function st(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return ee(()=>{n.current!==e&&(n.current=e)},t),n}function ut(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Pt(e){const t=Ht(e),n=u.useRef(null),r=u.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function Lt(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let fn={};function dt(e,t){return u.useMemo(()=>{if(t)return t;const n=fn[e]==null?0:fn[e]+1;return fn[e]=n,e+"-"+n},[e,t])}function wo(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((i,s)=>{const c=Object.entries(s);for(const[a,l]of c){const d=i[a];d!=null&&(i[a]=d+e*l)}return i},{...t})}}const ze=wo(1),zt=wo(-1);function ac(e){return"clientX"in e&&"clientY"in e}function Yt(e){if(!e)return!1;const{KeyboardEvent:t}=z(e.target);return t&&e instanceof t}function lc(e){if(!e)return!1;const{TouchEvent:t}=z(e.target);return t&&e instanceof t}function Bt(e){if(lc(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return ac(e)?{x:e.clientX,y:e.clientY}:null}const se=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[se.Translate.toString(e),se.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Tr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function uc(e){return e.matches(Tr)?e:e.querySelector(Tr)}const dc={display:"none"};function fc(e){let{id:t,value:n}=e;return I.createElement("div",{id:t,style:dc},n)}function hc(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function pc(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Co=u.createContext(null);function gc(e){const t=u.useContext(Co);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function vc(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:o,event:i}=r;e.forEach(s=>{var c;return(c=s[o])==null?void 0:c.call(s,i)})},[e]),t]}const yc={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},mc={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function bc(e){let{announcements:t=mc,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=yc}=e;const{announce:i,announcement:s}=pc(),c=dt("DndLiveRegion"),[a,l]=u.useState(!1);if(u.useEffect(()=>{l(!0)},[]),gc(u.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;t.onDragMove&&i(t.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;i(t.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;i(t.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;i(t.onDragCancel({active:p,over:g}))}}),[i,t])),!a)return null;const d=I.createElement(I.Fragment,null,I.createElement(fc,{id:r,value:o.draggable}),I.createElement(hc,{id:c,announcement:s}));return n?Le.createPortal(d,n):d}var M;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(M||(M={}));function $t(){}const te=Object.freeze({x:0,y:0});function xc(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function wc(e,t){const n=Bt(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Cc(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Sc(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ec(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function Dc(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Rc(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=o-r,c=i-n;if(r<o&&n<i){const a=t.width*t.height,l=e.width*e.height,d=s*c,f=d/(a+l-d);return Number(f.toFixed(4))}return 0}const jc=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const i of r){const{id:s}=i,c=n.get(s);if(c){const a=Rc(c,t);a>0&&o.push({id:s,data:{droppableContainer:i,value:a}})}}return o.sort(Sc)};function Ic(e,t){const{top:n,left:r,bottom:o,right:i}=t;return n<=e.y&&e.y<=o&&r<=e.x&&e.x<=i}const Oc=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const o=[];for(const i of t){const{id:s}=i,c=n.get(s);if(c&&Ic(r,c)){const l=Ec(c).reduce((f,p)=>f+xc(r,p),0),d=Number((l/4).toFixed(4));o.push({id:s,data:{droppableContainer:i,value:d}})}}return o.sort(Cc)};function Tc(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function So(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:te}function kc(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.reduce((s,c)=>({...s,top:s.top+e*c.y,bottom:s.bottom+e*c.y,left:s.left+e*c.x,right:s.right+e*c.x}),{...n})}}const Nc=kc(1);function Eo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Mc(e,t,n){const r=Eo(t);if(!r)return e;const{scaleX:o,scaleY:i,x:s,y:c}=r,a=e.left-s-(1-o)*parseFloat(n),l=e.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:l,right:a+d,bottom:l+f,left:a}}const _c={ignoreTransform:!1};function Ue(e,t){t===void 0&&(t=_c);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:l,transformOrigin:d}=z(e).getComputedStyle(e);l&&(n=Mc(n,l,d))}const{top:r,left:o,width:i,height:s,bottom:c,right:a}=n;return{top:r,left:o,width:i,height:s,bottom:c,right:a}}function kr(e){return Ue(e,{ignoreTransform:!0})}function Ac(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Pc(e,t){return t===void 0&&(t=z(e).getComputedStyle(e)),t.position==="fixed"}function Lc(e,t){t===void 0&&(t=z(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=t[o];return typeof i=="string"?n.test(i):!1})}function Fn(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if($n(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!lt(o)||xo(o)||n.includes(o))return n;const i=z(e).getComputedStyle(o);return o!==e&&Lc(o,i)&&n.push(o),Pc(o,i)?n:r(o.parentNode)}return e?r(e):n}function Do(e){const[t]=Fn(e,1);return t??null}function hn(e){return!Kt||!e?null:Fe(e)?e:Bn(e)?$n(e)||e===We(e).scrollingElement?window:lt(e)?e:null:null}function Ro(e){return Fe(e)?e.scrollX:e.scrollLeft}function jo(e){return Fe(e)?e.scrollY:e.scrollTop}function In(e){return{x:Ro(e),y:jo(e)}}var _;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(_||(_={}));function Io(e){return!Kt||!e?!1:e===document.scrollingElement}function Oo(e){const t={x:0,y:0},n=Io(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:o,isLeft:i,isBottom:s,isRight:c,maxScroll:r,minScroll:t}}const zc={x:.2,y:.2};function Bc(e,t,n,r,o){let{top:i,left:s,right:c,bottom:a}=n;r===void 0&&(r=10),o===void 0&&(o=zc);const{isTop:l,isBottom:d,isLeft:f,isRight:p}=Oo(e),g={x:0,y:0},m={x:0,y:0},y={height:t.height*o.y,width:t.width*o.x};return!l&&i<=t.top+y.height?(g.y=_.Backward,m.y=r*Math.abs((t.top+y.height-i)/y.height)):!d&&a>=t.bottom-y.height&&(g.y=_.Forward,m.y=r*Math.abs((t.bottom-y.height-a)/y.height)),!p&&c>=t.right-y.width?(g.x=_.Forward,m.x=r*Math.abs((t.right-y.width-c)/y.width)):!f&&s<=t.left+y.width&&(g.x=_.Backward,m.x=r*Math.abs((t.left+y.width-s)/y.width)),{direction:g,speed:m}}function $c(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function To(e){return e.reduce((t,n)=>ze(t,In(n)),te)}function Fc(e){return e.reduce((t,n)=>t+Ro(n),0)}function Wc(e){return e.reduce((t,n)=>t+jo(n),0)}function ko(e,t){if(t===void 0&&(t=Ue),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);Do(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Uc=[["x",["left","right"],Fc],["y",["top","bottom"],Wc]];class Wn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Fn(n),o=To(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,c]of Uc)for(const a of s)Object.defineProperty(this,a,{get:()=>{const l=c(r),d=o[i]-l;return this.rect[a]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class tt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Gc(e){const{EventTarget:t}=z(e);return e instanceof t?e:We(e)}function pn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var q;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(q||(q={}));function Nr(e){e.preventDefault()}function Xc(e){e.stopPropagation()}var j;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(j||(j={}));const No={start:[j.Space,j.Enter],cancel:[j.Esc],end:[j.Space,j.Enter,j.Tab]},Vc=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case j.Right:return{...n,x:n.x+25};case j.Left:return{...n,x:n.x-25};case j.Down:return{...n,y:n.y+25};case j.Up:return{...n,y:n.y-25}}};class Mo{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new tt(We(n)),this.windowListeners=new tt(z(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(q.Resize,this.handleCancel),this.windowListeners.add(q.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(q.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ko(r),n(te)}handleKeyDown(t){if(Yt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:i=No,coordinateGetter:s=Vc,scrollBehavior:c="smooth"}=o,{code:a}=t;if(i.end.includes(a)){this.handleEnd(t);return}if(i.cancel.includes(a)){this.handleCancel(t);return}const{collisionRect:l}=r.current,d=l?{x:l.left,y:l.top}:te;this.referenceCoordinates||(this.referenceCoordinates=d);const f=s(t,{active:n,context:r.current,currentCoordinates:d});if(f){const p=zt(f,d),g={x:0,y:0},{scrollableAncestors:m}=r.current;for(const y of m){const v=t.code,{isTop:x,isRight:S,isLeft:b,isBottom:w,maxScroll:C,minScroll:R}=Oo(y),D=$c(y),E={x:Math.min(v===j.Right?D.right-D.width/2:D.right,Math.max(v===j.Right?D.left:D.left+D.width/2,f.x)),y:Math.min(v===j.Down?D.bottom-D.height/2:D.bottom,Math.max(v===j.Down?D.top:D.top+D.height/2,f.y))},k=v===j.Right&&!S||v===j.Left&&!b,N=v===j.Down&&!w||v===j.Up&&!x;if(k&&E.x!==f.x){const O=y.scrollLeft+p.x,J=v===j.Right&&O<=C.x||v===j.Left&&O>=R.x;if(J&&!p.y){y.scrollTo({left:O,behavior:c});return}J?g.x=y.scrollLeft-O:g.x=v===j.Right?y.scrollLeft-C.x:y.scrollLeft-R.x,g.x&&y.scrollBy({left:-g.x,behavior:c});break}else if(N&&E.y!==f.y){const O=y.scrollTop+p.y,J=v===j.Down&&O<=C.y||v===j.Up&&O>=R.y;if(J&&!p.x){y.scrollTo({top:O,behavior:c});return}J?g.y=y.scrollTop-O:g.y=v===j.Down?y.scrollTop-C.y:y.scrollTop-R.y,g.y&&y.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(t,ze(zt(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Mo.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=No,onActivation:o}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const c=i.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Mr(e){return!!(e&&"distance"in e)}function _r(e){return!!(e&&"delay"in e)}class Un{constructor(t,n,r){var o;r===void 0&&(r=Gc(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=We(s),this.documentListeners=new tt(this.document),this.listeners=new tt(r),this.windowListeners=new tt(z(s)),this.initialCoordinates=(o=Bt(i))!=null?o:te,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(q.Resize,this.handleCancel),this.windowListeners.add(q.DragStart,Nr),this.windowListeners.add(q.VisibilityChange,this.handleCancel),this.windowListeners.add(q.ContextMenu,Nr),this.documentListeners.add(q.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(_r(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Mr(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(q.Click,Xc,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(q.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:i}=this,{onMove:s,options:{activationConstraint:c}}=i;if(!o)return;const a=(n=Bt(t))!=null?n:te,l=zt(o,a);if(!r&&c){if(Mr(c)){if(c.tolerance!=null&&pn(l,c.tolerance))return this.handleCancel();if(pn(l,c.distance))return this.handleStart()}if(_r(c)&&pn(l,c.tolerance))return this.handleCancel();this.handlePending(c,l);return}t.cancelable&&t.preventDefault(),s(a)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===j.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Kc={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class _o extends Un{constructor(t){const{event:n}=t,r=We(n.target);super(t,Kc,r)}}_o.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Hc={move:{name:"mousemove"},end:{name:"mouseup"}};var On;(function(e){e[e.RightClick=2]="RightClick"})(On||(On={}));class Yc extends Un{constructor(t){super(t,Hc,We(t.event.target))}}Yc.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===On.RightClick?!1:(r?.({event:n}),!0)}}];const gn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class qc extends Un{constructor(t){super(t,gn)}static setup(){return window.addEventListener(gn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(gn.move.name,t)};function t(){}}}qc.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var nt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(nt||(nt={}));var Ft;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ft||(Ft={}));function Jc(e){let{acceleration:t,activator:n=nt.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:s=5,order:c=Ft.TreeOrder,pointerCoordinates:a,scrollableAncestors:l,scrollableAncestorRects:d,delta:f,threshold:p}=e;const g=Zc({delta:f,disabled:!i}),[m,y]=cc(),v=u.useRef({x:0,y:0}),x=u.useRef({x:0,y:0}),S=u.useMemo(()=>{switch(n){case nt.Pointer:return a?{top:a.y,bottom:a.y,left:a.x,right:a.x}:null;case nt.DraggableRect:return o}},[n,o,a]),b=u.useRef(null),w=u.useCallback(()=>{const R=b.current;if(!R)return;const D=v.current.x*x.current.x,E=v.current.y*x.current.y;R.scrollBy(D,E)},[]),C=u.useMemo(()=>c===Ft.TreeOrder?[...l].reverse():l,[c,l]);u.useEffect(()=>{if(!i||!l.length||!S){y();return}for(const R of C){if(r?.(R)===!1)continue;const D=l.indexOf(R),E=d[D];if(!E)continue;const{direction:k,speed:N}=Bc(R,E,S,t,p);for(const O of["x","y"])g[O][k[O]]||(N[O]=0,k[O]=0);if(N.x>0||N.y>0){y(),b.current=R,m(w,s),v.current=N,x.current=k;return}}v.current={x:0,y:0},x.current={x:0,y:0},y()},[t,w,r,y,i,s,JSON.stringify(S),JSON.stringify(g),m,l,C,d,JSON.stringify(p)])}const Qc={x:{[_.Backward]:!1,[_.Forward]:!1},y:{[_.Backward]:!1,[_.Forward]:!1}};function Zc(e){let{delta:t,disabled:n}=e;const r=Lt(t);return ut(o=>{if(n||!r||!o)return Qc;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[_.Backward]:o.x[_.Backward]||i.x===-1,[_.Forward]:o.x[_.Forward]||i.x===1},y:{[_.Backward]:o.y[_.Backward]||i.y===-1,[_.Forward]:o.y[_.Forward]||i.y===1}}},[n,t,r])}function ea(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return ut(o=>{var i;return t==null?null:(i=r??o)!=null?i:null},[r,t])}function ta(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,i=o.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var ct;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ct||(ct={}));var Tn;(function(e){e.Optimized="optimized"})(Tn||(Tn={}));const Ar=new Map;function na(e,t){let{dragging:n,dependencies:r,config:o}=t;const[i,s]=u.useState(null),{frequency:c,measure:a,strategy:l}=o,d=u.useRef(e),f=v(),p=st(f),g=u.useCallback(function(x){x===void 0&&(x=[]),!p.current&&s(S=>S===null?x:S.concat(x.filter(b=>!S.includes(b))))},[p]),m=u.useRef(null),y=ut(x=>{if(f&&!n)return Ar;if(!x||x===Ar||d.current!==e||i!=null){const S=new Map;for(let b of e){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){S.set(b.id,b.rect.current);continue}const w=b.node.current,C=w?new Wn(a(w),w):null;b.rect.current=C,C&&S.set(b.id,C)}return S}return x},[e,i,n,f,a]);return u.useEffect(()=>{d.current=e},[e]),u.useEffect(()=>{f||g()},[n,f]),u.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),u.useEffect(()=>{f||typeof c!="number"||m.current!==null||(m.current=setTimeout(()=>{g(),m.current=null},c))},[c,f,g,...r]),{droppableRects:y,measureDroppableContainers:g,measuringScheduled:i!=null};function v(){switch(l){case ct.Always:return!1;case ct.BeforeDragging:return n;default:return!n}}}function Gn(e,t){return ut(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function ra(e,t){return Gn(e,t)}function oa(e){let{callback:t,disabled:n}=e;const r=Ht(t),o=u.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return u.useEffect(()=>()=>o?.disconnect(),[o]),o}function qt(e){let{callback:t,disabled:n}=e;const r=Ht(t),o=u.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return u.useEffect(()=>()=>o?.disconnect(),[o]),o}function ia(e){return new Wn(Ue(e),e)}function Pr(e,t,n){t===void 0&&(t=ia);const[r,o]=u.useState(null);function i(){o(a=>{if(!e)return null;if(e.isConnected===!1){var l;return(l=a??n)!=null?l:null}const d=t(e);return JSON.stringify(a)===JSON.stringify(d)?a:d})}const s=oa({callback(a){if(e)for(const l of a){const{type:d,target:f}=l;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),c=qt({callback:i});return ee(()=>{i(),e?(c?.observe(e),s?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),s?.disconnect())},[e]),r}function sa(e){const t=Gn(e);return So(e,t)}const Lr=[];function ca(e){const t=u.useRef(e),n=ut(r=>e?r&&r!==Lr&&e&&t.current&&e.parentNode===t.current.parentNode?r:Fn(e):Lr,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function aa(e){const[t,n]=u.useState(null),r=u.useRef(e),o=u.useCallback(i=>{const s=hn(i.target);s&&n(c=>c?(c.set(s,In(s)),new Map(c)):null)},[]);return u.useEffect(()=>{const i=r.current;if(e!==i){s(i);const c=e.map(a=>{const l=hn(a);return l?(l.addEventListener("scroll",o,{passive:!0}),[l,In(l)]):null}).filter(a=>a!=null);n(c.length?new Map(c):null),r.current=e}return()=>{s(e),s(i)};function s(c){c.forEach(a=>{const l=hn(a);l?.removeEventListener("scroll",o)})}},[o,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>ze(i,s),te):To(e):te,[e,t])}function zr(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==te;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?zt(e,n.current):te}function la(e){u.useEffect(()=>{if(!Kt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function ua(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:i}=r;return n[o]=s=>{i(s,t)},n},{}),[e,t])}function Ao(e){return u.useMemo(()=>e?Ac(e):null,[e])}const Br=[];function da(e,t){t===void 0&&(t=Ue);const[n]=e,r=Ao(n?z(n):null),[o,i]=u.useState(Br);function s(){i(()=>e.length?e.map(a=>Io(a)?r:new Wn(t(a),a)):Br)}const c=qt({callback:s});return ee(()=>{c?.disconnect(),s(),e.forEach(a=>c?.observe(a))},[e]),o}function Po(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return lt(t)?t:e}function fa(e){let{measure:t}=e;const[n,r]=u.useState(null),o=u.useCallback(l=>{for(const{target:d}of l)if(lt(d)){r(f=>{const p=t(d);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=qt({callback:o}),s=u.useCallback(l=>{const d=Po(l);i?.disconnect(),d&&i?.observe(d),r(d?t(d):null)},[t,i]),[c,a]=Pt(s);return u.useMemo(()=>({nodeRef:c,rect:n,setRef:a}),[n,c,a])}const ha=[{sensor:_o,options:{}},{sensor:Mo,options:{}}],pa={current:{}},Dt={draggable:{measure:kr},droppable:{measure:kr,strategy:ct.WhileDragging,frequency:Tn.Optimized},dragOverlay:{measure:Ue}};class rt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const ga={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$t},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Dt,measureDroppableContainers:$t,windowRect:null,measuringScheduled:!1},Lo={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$t,draggableNodes:new Map,over:null,measureDroppableContainers:$t},ft=u.createContext(Lo),zo=u.createContext(ga);function va(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rt}}}function ya(e,t){switch(t.type){case M.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case M.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case M.DragEnd:case M.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case M.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new rt(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case M.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new rt(e.droppable.containers);return s.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:s}}}case M.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new rt(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function ma(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=u.useContext(ft),i=Lt(r),s=Lt(n?.id);return u.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!Yt(i)||document.activeElement===i.target)return;const c=o.get(s);if(!c)return;const{activatorNode:a,node:l}=c;if(!a.current&&!l.current)return;requestAnimationFrame(()=>{for(const d of[a.current,l.current]){if(!d)continue;const f=uc(d);if(f){f.focus();break}}})}},[r,t,o,s,i]),null}function Bo(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...r}),n):n}function ba(e){return u.useMemo(()=>({draggable:{...Dt.draggable,...e?.draggable},droppable:{...Dt.droppable,...e?.droppable},dragOverlay:{...Dt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function xa(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const i=u.useRef(!1),{x:s,y:c}=typeof o=="boolean"?{x:o,y:o}:o;ee(()=>{if(!s&&!c||!t){i.current=!1;return}if(i.current||!r)return;const l=t?.node.current;if(!l||l.isConnected===!1)return;const d=n(l),f=So(d,r);if(s||(f.x=0),c||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=Do(l);p&&p.scrollBy({top:f.y,left:f.x})}},[t,s,c,r,n])}const Jt=u.createContext({...te,scaleX:1,scaleY:1});var xe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(xe||(xe={}));const Xn=u.memo(function(t){var n,r,o,i;let{id:s,accessibility:c,autoScroll:a=!0,children:l,sensors:d=ha,collisionDetection:f=jc,measuring:p,modifiers:g,...m}=t;const y=u.useReducer(ya,void 0,va),[v,x]=y,[S,b]=vc(),[w,C]=u.useState(xe.Uninitialized),R=w===xe.Initialized,{draggable:{active:D,nodes:E,translate:k},droppable:{containers:N}}=v,O=D!=null?E.get(D):null,J=u.useRef({initial:null,translated:null}),Q=u.useMemo(()=>{var L;return D!=null?{id:D,data:(L=O?.data)!=null?L:pa,rect:J}:null},[D,O]),ne=u.useRef(null),[Ge,ht]=u.useState(null),[$,pt]=u.useState(null),ce=st(m,Object.values(m)),Xe=dt("DndDescribedBy",s),gt=u.useMemo(()=>N.getEnabled(),[N]),B=ba(p),{droppableRects:ae,measureDroppableContainers:Se,measuringScheduled:Ve}=na(gt,{dragging:R,dependencies:[k.x,k.y],config:B.droppable}),H=ea(E,D),vt=u.useMemo(()=>$?Bt($):null,[$]),pe=si(),le=ra(H,B.draggable.measure);xa({activeNode:D!=null?E.get(D):null,config:pe.layoutShiftCompensation,initialRect:le,measure:B.draggable.measure});const T=Pr(H,B.draggable.measure,le),Ke=Pr(H?H.parentElement:null),re=u.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Oe=N.getNodeFor((n=re.current.over)==null?void 0:n.id),ue=fa({measure:B.dragOverlay.measure}),Te=(r=ue.nodeRef.current)!=null?r:H,ke=R?(o=ue.rect)!=null?o:T:null,qn=!!(ue.nodeRef.current&&ue.rect),Jn=sa(qn?null:T),Zt=Ao(Te?z(Te):null),ge=ca(R?Oe??H:null),yt=da(ge),mt=Bo(g,{transform:{x:k.x-Jn.x,y:k.y-Jn.y,scaleX:1,scaleY:1},activatorEvent:$,active:Q,activeNodeRect:T,containerNodeRect:Ke,draggingNodeRect:ke,over:re.current.over,overlayNodeRect:ue.rect,scrollableAncestors:ge,scrollableAncestorRects:yt,windowRect:Zt}),Qn=vt?ze(vt,k):null,Zn=aa(ge),Zo=zr(Zn),ei=zr(Zn,[T]),Ne=ze(mt,Zo),Me=ke?Nc(ke,mt):null,He=Q&&Me?f({active:Q,collisionRect:Me,droppableRects:ae,droppableContainers:gt,pointerCoordinates:Qn}):null,er=Dc(He,"id"),[ve,tr]=u.useState(null),ti=qn?mt:ze(mt,ei),ni=Tc(ti,(i=ve?.rect)!=null?i:null,T),en=u.useRef(null),nr=u.useCallback((L,F)=>{let{sensor:W,options:ye}=F;if(ne.current==null)return;const Y=E.get(ne.current);if(!Y)return;const U=L.nativeEvent,oe=new W({active:ne.current,activeNode:Y,event:U,options:ye,context:re,onAbort(A){if(!E.get(A))return;const{onDragAbort:ie}=ce.current,de={id:A};ie?.(de),S({type:"onDragAbort",event:de})},onPending(A,me,ie,de){if(!E.get(A))return;const{onDragPending:qe}=ce.current,be={id:A,constraint:me,initialCoordinates:ie,offset:de};qe?.(be),S({type:"onDragPending",event:be})},onStart(A){const me=ne.current;if(me==null)return;const ie=E.get(me);if(!ie)return;const{onDragStart:de}=ce.current,Ye={activatorEvent:U,active:{id:me,data:ie.data,rect:J}};Le.unstable_batchedUpdates(()=>{de?.(Ye),C(xe.Initializing),x({type:M.DragStart,initialCoordinates:A,active:me}),S({type:"onDragStart",event:Ye}),ht(en.current),pt(U)})},onMove(A){x({type:M.DragMove,coordinates:A})},onEnd:_e(M.DragEnd),onCancel:_e(M.DragCancel)});en.current=oe;function _e(A){return async function(){const{active:ie,collisions:de,over:Ye,scrollAdjustedTranslate:qe}=re.current;let be=null;if(ie&&qe){const{cancelDrop:Je}=ce.current;be={activatorEvent:U,active:ie,collisions:de,delta:qe,over:Ye},A===M.DragEnd&&typeof Je=="function"&&await Promise.resolve(Je(be))&&(A=M.DragCancel)}ne.current=null,Le.unstable_batchedUpdates(()=>{x({type:A}),C(xe.Uninitialized),tr(null),ht(null),pt(null),en.current=null;const Je=A===M.DragEnd?"onDragEnd":"onDragCancel";if(be){const tn=ce.current[Je];tn?.(be),S({type:Je,event:be})}})}}},[E]),ri=u.useCallback((L,F)=>(W,ye)=>{const Y=W.nativeEvent,U=E.get(ye);if(ne.current!==null||!U||Y.dndKit||Y.defaultPrevented)return;const oe={active:U};L(W,F.options,oe)===!0&&(Y.dndKit={capturedBy:F.sensor},ne.current=ye,nr(W,F))},[E,nr]),rr=ta(d,ri);la(d),ee(()=>{T&&w===xe.Initializing&&C(xe.Initialized)},[T,w]),u.useEffect(()=>{const{onDragMove:L}=ce.current,{active:F,activatorEvent:W,collisions:ye,over:Y}=re.current;if(!F||!W)return;const U={active:F,activatorEvent:W,collisions:ye,delta:{x:Ne.x,y:Ne.y},over:Y};Le.unstable_batchedUpdates(()=>{L?.(U),S({type:"onDragMove",event:U})})},[Ne.x,Ne.y]),u.useEffect(()=>{const{active:L,activatorEvent:F,collisions:W,droppableContainers:ye,scrollAdjustedTranslate:Y}=re.current;if(!L||ne.current==null||!F||!Y)return;const{onDragOver:U}=ce.current,oe=ye.get(er),_e=oe&&oe.rect.current?{id:oe.id,rect:oe.rect.current,data:oe.data,disabled:oe.disabled}:null,A={active:L,activatorEvent:F,collisions:W,delta:{x:Y.x,y:Y.y},over:_e};Le.unstable_batchedUpdates(()=>{tr(_e),U?.(A),S({type:"onDragOver",event:A})})},[er]),ee(()=>{re.current={activatorEvent:$,active:Q,activeNode:H,collisionRect:Me,collisions:He,droppableRects:ae,draggableNodes:E,draggingNode:Te,draggingNodeRect:ke,droppableContainers:N,over:ve,scrollableAncestors:ge,scrollAdjustedTranslate:Ne},J.current={initial:ke,translated:Me}},[Q,H,He,Me,E,Te,ke,ae,N,ve,ge,Ne]),Jc({...pe,delta:k,draggingRect:Me,pointerCoordinates:Qn,scrollableAncestors:ge,scrollableAncestorRects:yt});const oi=u.useMemo(()=>({active:Q,activeNode:H,activeNodeRect:T,activatorEvent:$,collisions:He,containerNodeRect:Ke,dragOverlay:ue,draggableNodes:E,droppableContainers:N,droppableRects:ae,over:ve,measureDroppableContainers:Se,scrollableAncestors:ge,scrollableAncestorRects:yt,measuringConfiguration:B,measuringScheduled:Ve,windowRect:Zt}),[Q,H,T,$,He,Ke,ue,E,N,ae,ve,Se,ge,yt,B,Ve,Zt]),ii=u.useMemo(()=>({activatorEvent:$,activators:rr,active:Q,activeNodeRect:T,ariaDescribedById:{draggable:Xe},dispatch:x,draggableNodes:E,over:ve,measureDroppableContainers:Se}),[$,rr,Q,T,x,Xe,E,ve,Se]);return I.createElement(Co.Provider,{value:b},I.createElement(ft.Provider,{value:ii},I.createElement(zo.Provider,{value:oi},I.createElement(Jt.Provider,{value:ni},l)),I.createElement(ma,{disabled:c?.restoreFocus===!1})),I.createElement(bc,{...c,hiddenTextDescribedById:Xe}));function si(){const L=Ge?.autoScrollEnabled===!1,F=typeof a=="object"?a.enabled===!1:a===!1,W=R&&!L&&!F;return typeof a=="object"?{...a,enabled:W}:{enabled:W}}}),wa=u.createContext(null),$r="button",Ca="Draggable";function Sa(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const i=dt(Ca),{activators:s,activatorEvent:c,active:a,activeNodeRect:l,ariaDescribedById:d,draggableNodes:f,over:p}=u.useContext(ft),{role:g=$r,roleDescription:m="draggable",tabIndex:y=0}=o??{},v=a?.id===t,x=u.useContext(v?Jt:wa),[S,b]=Pt(),[w,C]=Pt(),R=ua(s,t),D=st(n);ee(()=>(f.set(t,{id:t,key:i,node:S,activatorNode:w,data:D}),()=>{const k=f.get(t);k&&k.key===i&&f.delete(t)}),[f,t]);const E=u.useMemo(()=>({role:g,tabIndex:y,"aria-disabled":r,"aria-pressed":v&&g===$r?!0:void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[r,g,y,v,m,d.draggable]);return{active:a,activatorEvent:c,activeNodeRect:l,attributes:E,isDragging:v,listeners:r?void 0:R,node:S,over:p,setNodeRef:b,setActivatorNodeRef:C,transform:x}}function $o(){return u.useContext(zo)}const Ea="Droppable",Da={timeout:25};function Fo(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const i=dt(Ea),{active:s,dispatch:c,over:a,measureDroppableContainers:l}=u.useContext(ft),d=u.useRef({disabled:n}),f=u.useRef(!1),p=u.useRef(null),g=u.useRef(null),{disabled:m,updateMeasurementsFor:y,timeout:v}={...Da,...o},x=st(y??r),S=u.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{l(Array.isArray(x.current)?x.current:[x.current]),g.current=null},v)},[v]),b=qt({callback:S,disabled:m||!s}),w=u.useCallback((E,k)=>{b&&(k&&(b.unobserve(k),f.current=!1),E&&b.observe(E))},[b]),[C,R]=Pt(w),D=st(t);return u.useEffect(()=>{!b||!C.current||(b.disconnect(),f.current=!1,b.observe(C.current))},[C,b]),u.useEffect(()=>(c({type:M.RegisterDroppable,element:{id:r,key:i,disabled:n,node:C,rect:p,data:D}}),()=>c({type:M.UnregisterDroppable,key:i,id:r})),[r]),u.useEffect(()=>{n!==d.current.disabled&&(c({type:M.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,c]),{active:s,rect:p,isOver:a?.id===r,node:C,over:a,setNodeRef:R}}function Ra(e){let{animation:t,children:n}=e;const[r,o]=u.useState(null),[i,s]=u.useState(null),c=Lt(n);return!n&&!r&&c&&o(c),ee(()=>{if(!i)return;const a=r?.key,l=r?.props.id;if(a==null||l==null){o(null);return}Promise.resolve(t(l,i)).then(()=>{o(null)})},[t,r,i]),I.createElement(I.Fragment,null,n,r?u.cloneElement(r,{ref:s}):null)}const ja={x:0,y:0,scaleX:1,scaleY:1};function Ia(e){let{children:t}=e;return I.createElement(ft.Provider,{value:Lo},I.createElement(Jt.Provider,{value:ja},t))}const Oa={position:"fixed",touchAction:"none"},Ta=e=>Yt(e)?"transform 250ms ease":void 0,ka=u.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:i,className:s,rect:c,style:a,transform:l,transition:d=Ta}=e;if(!c)return null;const f=o?l:{...l,scaleX:1,scaleY:1},p={...Oa,width:c.width,height:c.height,top:c.top,left:c.left,transform:se.Transform.toString(f),transformOrigin:o&&r?wc(r,c):void 0,transition:typeof d=="function"?d(r):d,...a};return I.createElement(n,{className:s,style:p,ref:t},i)}),Na=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:i,className:s}=e;if(i!=null&&i.active)for(const[c,a]of Object.entries(i.active))a!==void 0&&(o[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,a));if(i!=null&&i.dragOverlay)for(const[c,a]of Object.entries(i.dragOverlay))a!==void 0&&r.node.style.setProperty(c,a);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[a,l]of Object.entries(o))n.node.style.setProperty(a,l);s!=null&&s.active&&n.node.classList.remove(s.active)}},Ma=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:se.Transform.toString(t)},{transform:se.Transform.toString(n)}]},_a={duration:250,easing:"ease",keyframes:Ma,sideEffects:Na({styles:{active:{opacity:"0"}}})};function Aa(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return Ht((i,s)=>{if(t===null)return;const c=n.get(i);if(!c)return;const a=c.node.current;if(!a)return;const l=Po(s);if(!l)return;const{transform:d}=z(s).getComputedStyle(s),f=Eo(d);if(!f)return;const p=typeof t=="function"?t:Pa(t);return ko(a,o.draggable.measure),p({active:{id:i,data:c.data,node:a,rect:o.draggable.measure(a)},draggableNodes:n,dragOverlay:{node:s,rect:o.dragOverlay.measure(l)},droppableContainers:r,measuringConfiguration:o,transform:f})})}function Pa(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={..._a,...e};return i=>{let{active:s,dragOverlay:c,transform:a,...l}=i;if(!t)return;const d={x:c.rect.left-s.rect.left,y:c.rect.top-s.rect.top},f={scaleX:a.scaleX!==1?s.rect.width*a.scaleX/c.rect.width:1,scaleY:a.scaleY!==1?s.rect.height*a.scaleY/c.rect.height:1},p={x:a.x-d.x,y:a.y-d.y,...f},g=o({...l,active:s,dragOverlay:c,transform:{initial:a,final:p}}),[m]=g,y=g[g.length-1];if(JSON.stringify(m)===JSON.stringify(y))return;const v=r?.({active:s,dragOverlay:c,...l}),x=c.node.animate(g,{duration:t,easing:n,fill:"forwards"});return new Promise(S=>{x.onfinish=()=>{v?.(),S()}})}}let Fr=0;function La(e){return u.useMemo(()=>{if(e!=null)return Fr++,Fr},[e])}const za=I.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:i,modifiers:s,wrapperElement:c="div",className:a,zIndex:l=999}=e;const{activatorEvent:d,active:f,activeNodeRect:p,containerNodeRect:g,draggableNodes:m,droppableContainers:y,dragOverlay:v,over:x,measuringConfiguration:S,scrollableAncestors:b,scrollableAncestorRects:w,windowRect:C}=$o(),R=u.useContext(Jt),D=La(f?.id),E=Bo(s,{activatorEvent:d,active:f,activeNodeRect:p,containerNodeRect:g,draggingNodeRect:v.rect,over:x,overlayNodeRect:v.rect,scrollableAncestors:b,scrollableAncestorRects:w,transform:R,windowRect:C}),k=Gn(p),N=Aa({config:r,draggableNodes:m,droppableContainers:y,measuringConfiguration:S}),O=k?v.setRef:void 0;return I.createElement(Ia,null,I.createElement(Ra,{animation:N},f&&D?I.createElement(ka,{key:D,id:f.id,ref:O,as:c,activatorEvent:d,adjustScale:t,className:a,transition:i,rect:k,style:{zIndex:l,...o},transform:E},n):null))});function Wo(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Ba(e,t){return e.reduce((n,r,o)=>{const i=t.get(r);return i&&(n[o]=i),n},Array(e.length))}function Ct(e){return e!==null&&e>=0}function $a(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Fa(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Uo=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const i=Wo(t,r,n),s=t[o],c=i[o];return!c||!s?null:{x:c.left-s.left,y:c.top-s.top,scaleX:c.width/s.width,scaleY:c.height/s.height}},St={scaleX:1,scaleY:1},Vn=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:i,overIndex:s}=e;const c=(t=i[n])!=null?t:r;if(!c)return null;if(o===n){const l=i[s];return l?{x:0,y:n<s?l.top+l.height-(c.top+c.height):l.top-c.top,...St}:null}const a=Wa(i,o,n);return o>n&&o<=s?{x:0,y:-c.height-a,...St}:o<n&&o>=s?{x:0,y:c.height+a,...St}:{x:0,y:0,...St}};function Wa(e,t,n){const r=e[t],o=e[t-1],i=e[t+1];return r?n<t?o?r.top-(o.top+o.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const Go="Sortable",Xo=I.createContext({activeIndex:-1,containerId:Go,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Uo,disabled:{draggable:!1,droppable:!1}});function Kn(e){let{children:t,id:n,items:r,strategy:o=Uo,disabled:i=!1}=e;const{active:s,dragOverlay:c,droppableRects:a,over:l,measureDroppableContainers:d}=$o(),f=dt(Go,n),p=c.rect!==null,g=u.useMemo(()=>r.map(R=>typeof R=="object"&&"id"in R?R.id:R),[r]),m=s!=null,y=s?g.indexOf(s.id):-1,v=l?g.indexOf(l.id):-1,x=u.useRef(g),S=!$a(g,x.current),b=v!==-1&&y===-1||S,w=Fa(i);ee(()=>{S&&m&&d(g)},[S,g,m,d]),u.useEffect(()=>{x.current=g},[g]);const C=u.useMemo(()=>({activeIndex:y,containerId:f,disabled:w,disableTransforms:b,items:g,overIndex:v,useDragOverlay:p,sortedRects:Ba(g,a),strategy:o}),[y,f,w.draggable,w.droppable,b,g,v,a,p,o]);return I.createElement(Xo.Provider,{value:C},t)}const Ua=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Wo(n,r,o).indexOf(t)},Ga=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:s,previousItems:c,previousContainerId:a,transition:l}=e;return!l||!r||c!==i&&o===s?!1:n?!0:s!==o&&t===a},Xa={duration:200,easing:"ease"},Vo="transform",Va=se.Transition.toString({property:Vo,duration:0,easing:"linear"}),Ka={roleDescription:"sortable"};function Ha(e){let{disabled:t,index:n,node:r,rect:o}=e;const[i,s]=u.useState(null),c=u.useRef(n);return ee(()=>{if(!t&&n!==c.current&&r.current){const a=o.current;if(a){const l=Ue(r.current,{ignoreTransform:!0}),d={x:a.left-l.left,y:a.top-l.top,scaleX:a.width/l.width,scaleY:a.height/l.height};(d.x||d.y)&&s(d)}}n!==c.current&&(c.current=n)},[t,n,r,o]),u.useEffect(()=>{i&&s(null)},[i]),i}function Hn(e){let{animateLayoutChanges:t=Ga,attributes:n,disabled:r,data:o,getNewIndex:i=Ua,id:s,strategy:c,resizeObserverConfig:a,transition:l=Xa}=e;const{items:d,containerId:f,activeIndex:p,disabled:g,disableTransforms:m,sortedRects:y,overIndex:v,useDragOverlay:x,strategy:S}=u.useContext(Xo),b=Ya(r,g),w=d.indexOf(s),C=u.useMemo(()=>({sortable:{containerId:f,index:w,items:d},...o}),[f,o,w,d]),R=u.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:D,node:E,isOver:k,setNodeRef:N}=Fo({id:s,data:C,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...a}}),{active:O,activatorEvent:J,activeNodeRect:Q,attributes:ne,setNodeRef:Ge,listeners:ht,isDragging:$,over:pt,setActivatorNodeRef:ce,transform:Xe}=Sa({id:s,data:C,attributes:{...Ka,...n},disabled:b.draggable}),gt=sc(N,Ge),B=!!O,ae=B&&!m&&Ct(p)&&Ct(v),Se=!x&&$,Ve=Se&&ae?Xe:null,vt=ae?Ve??(c??S)({rects:y,activeNodeRect:Q,activeIndex:p,overIndex:v,index:w}):null,pe=Ct(p)&&Ct(v)?i({id:s,items:d,activeIndex:p,overIndex:v}):w,le=O?.id,T=u.useRef({activeId:le,items:d,newIndex:pe,containerId:f}),Ke=d!==T.current.items,re=t({active:O,containerId:f,isDragging:$,isSorting:B,id:s,index:w,items:d,newIndex:T.current.newIndex,previousItems:T.current.items,previousContainerId:T.current.containerId,transition:l,wasDragging:T.current.activeId!=null}),Oe=Ha({disabled:!re,index:w,node:E,rect:D});return u.useEffect(()=>{B&&T.current.newIndex!==pe&&(T.current.newIndex=pe),f!==T.current.containerId&&(T.current.containerId=f),d!==T.current.items&&(T.current.items=d)},[B,pe,f,d]),u.useEffect(()=>{if(le===T.current.activeId)return;if(le!=null&&T.current.activeId==null){T.current.activeId=le;return}const Te=setTimeout(()=>{T.current.activeId=le},50);return()=>clearTimeout(Te)},[le]),{active:O,activeIndex:p,attributes:ne,data:C,rect:D,index:w,newIndex:pe,items:d,isOver:k,isSorting:B,isDragging:$,listeners:ht,node:E,overIndex:v,over:pt,setNodeRef:gt,setActivatorNodeRef:ce,setDroppableNodeRef:N,setDraggableNodeRef:Ge,transform:Oe??vt,transition:ue()};function ue(){if(Oe||Ke&&T.current.newIndex===w)return Va;if(!(Se&&!Yt(J)||!l)&&(B||re))return se.Transition.toString({...l,property:Vo})}}function Ya(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}j.Down,j.Right,j.Up,j.Left;function qa({tagData:e}){const t=Ie(),n=je(),r=n.tagIds.includes(e.id),o=Ce(),{setNodeRef:i,attributes:s,listeners:c,transform:a,transition:l}=Hn({id:e.id}),d={transform:se.Translate.toString(a),transition:l};return h.jsxs("div",{className:ir.editableTagDisplay,"data-selected":r,ref:i,style:d,children:[h.jsx(zn,{...s,...c}),h.jsx(ic,{value:e.color,onChange:f=>o(mr({...e,color:f}))}),h.jsx(kt,{onValueUpdate:f=>o(mr({...e,content:f})),value:e.content,required:!0,element:(f,p,g,m)=>h.jsx(_t,{className:ir.contentField,value:f,onClick:p,onChange:g,onBlur:m,plainable:!0})}),h.jsx(Pn,{onClick:()=>o(oo({groupId:t.id,todoId:n.id,tagId:e.id})),toogled:r,elementOn:h.jsx(fo,{}),elementOff:h.jsx(at,{})}),h.jsx(vo,{onConfirm:()=>o(ss(e.id)),title:"Удаление тега",message:"Вы точно хотите удалить тег?",triggerElement:f=>h.jsx($e,{onClick:f,children:h.jsx(ho,{})})})]})}function Ko({className:e,children:t,...n}){return h.jsx("button",{className:K(e,di.textButton),...n,children:t})}function Ja({className:e,onClear:t,value:n,...r}){return h.jsxs("div",{className:K(e,bt.searchInputWrapper),children:[h.jsx("input",{value:n,className:bt.searchInput,placeholder:"Поиск...",...r}),h.jsx("div",{className:bt.icon,children:h.jsx(tc,{})}),n&&h.jsx(Ko,{onClick:t,className:bt.button,children:h.jsx(An,{})})]})}function Qa(){return h.jsxs("div",{className:yn.tagsEditListFallback,children:[h.jsx(nc,{}),"Нет тегов"]})}const Wr=e=>e.replace(/\s+/g,"").toLowerCase();function Za(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}const Ho=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return!n||!t?r:Za(r,n,t)},Yo=e=>{let{transform:t}=e;return{...t,x:0}},Yn=u.forwardRef(({variant:e="vertical",className:t,children:n,...r},o)=>h.jsx("div",{ref:o,className:K(fi.stack,e,t),...r,children:n})),el=(e,t)=>Wr(e).includes(Wr(t));function tl({triggerElement:e}){const t=Ce(),[n,r]=u.useState(""),o=Vt(s=>s.tags.filter(c=>!n||el(c.content,n)));return h.jsxs(go,{triggerElement:e,title:"Теги",className:"wide",children:[h.jsx(qo,{mode:"edit",tagsData:[]}),h.jsxs("div",{className:yn.tagsBlock,children:[h.jsx(Ja,{value:n,onClear:()=>r(""),onChange:s=>r(s.target.value)}),h.jsx(Xn,{modifiers:[Yo,Ho],onDragEnd:i,children:h.jsx(Kn,{strategy:Vn,items:o,children:h.jsxs(Yn,{className:yn.tagsStack,children:[o.length===0&&h.jsx(Qa,{}),o.map(s=>h.jsx(qa,{tagData:s},s.id))]})})}),h.jsxs(At,{className:"small",onClick:()=>t(is(n)),children:["Добавить тег",h.jsx(at,{})]})]})]});function i(s){const c=s.active?.id,a=s.over?.id;t(cs({fromId:c,toId:a}))}}function Qt({color:e="neutral",className:t,children:n,...r}){return h.jsx("div",{className:K(hi.badge,e,t),...r,children:n})}function nl({tagData:e,deletable:t=!1}){const n=Ie(),r=je(),o=Ce();return h.jsxs(Qt,{color:e.color,children:[e.content,t&&h.jsx(Ko,{onClick:()=>o(oo({groupId:n.id,todoId:r.id,tagId:e.id})),children:h.jsx(An,{})})]})}function rl(){const e=Vt(n=>n.tags),t=je().tagIds;return e.filter(n=>t.includes(n.id))}function ol(){return h.jsx(Qt,{children:"Нет тегов"})}function qo({mode:e,className:t}){const n=rl();return h.jsxs("div",{className:K(t,sr.tagStack),children:[n.length===0&&h.jsx(ol,{}),n.map(r=>h.jsx(nl,{tagData:r,deletable:e==="edit"},r.id)),e==="show"&&h.jsx(tl,{triggerElement:r=>h.jsx(Qt,{className:sr.tagsEditButton,onClick:r,children:h.jsx(at,{})})})]})}function il(e){const[t,n]=u.useState(!1),r=u.useRef(!1);return u.useEffect(()=>{const o=()=>{r.current?r.current=!1:n(!1)};return window.addEventListener(`signal-${e}`,o),()=>window.removeEventListener(`signal-${e}`,o)},[e]),u.useEffect(()=>{t&&(r.current=!0,window.dispatchEvent(new Event(`signal-${e}`)))},[t]),[t,n]}const Jo=u.createContext(void 0);function sl({value:e,children:t}){return h.jsx(Jo.Provider,{value:e,children:t})}function cl(){return u.useContext(Jo)}function al({onClick:e,children:t,...n}){const{setOpen:r}=cl(),o=i=>{r(!1),e?.(i)};return h.jsx("button",{onClick:o,className:mn.action,...n,children:t})}function ll({children:e}){const[t,n]=u.useState(!1),r=Ln(()=>n(!1));return h.jsx(sl,{value:{open:t,setOpen:n},children:h.jsxs("div",{className:mn.dropdownMenu,children:[h.jsx($e,{onClick:()=>n(!0),children:h.jsx(Qs,{})}),t&&h.jsx("div",{ref:r,className:mn.menu,children:e})]})})}const Et={Root:ll,Action:al};function ul({...e}){return h.jsx("input",{className:pi.checkbox,type:"checkbox",...e})}function dl({stepData:e}){const t=Ie(),n=je(),r=Ce(),{attributes:o,listeners:i,setNodeRef:s,transform:c,transition:a,isDragging:l}=Hn({id:e.id}),d={transform:se.Translate.toString(c),transition:a,zIndex:l?100:"auto"};return h.jsxs("div",{ref:s,className:nn.todoStepDisplay,style:d,children:[h.jsx(zn,{...o,...i}),h.jsx(ul,{checked:e.checked,onChange:()=>r(wr({groupId:t.id,todoId:n.id,step:{...e,checked:!e.checked}}))}),h.jsx(kt,{required:!0,onValueUpdate:f=>r(wr({groupId:t.id,todoId:n.id,step:{...e,content:f}})),value:e.content,element:(f,p,g,m)=>h.jsx(_t,{className:K(e.checked?nn.completed:"",nn.contentField),value:f,onClick:p,onChange:g,onBlur:m,plainable:!0,small:!0})}),h.jsx($e,{onClick:()=>r(ps({groupId:t.id,todoId:n.id,stepId:e.id})),children:h.jsx(fo,{})})]})}function fl({className:e}){const t=Ie(),n=je(),r=n.steps,o=Ce(),i=s=>{const c=s.active?.id,a=s.over?.id;o(gs({groupId:t.id,todoId:n.id,fromId:c,toId:a}))};return h.jsx(Xn,{onDragEnd:i,modifiers:[Yo,Ho],children:h.jsx(Kn,{items:r,strategy:Vn,id:n.id,children:h.jsx(Yn,{className:K(e),children:r.map(s=>h.jsx(dl,{stepData:s},s.id))})})})}function hl(){const e=Ie(),t=Vt(r=>r.todos),n=t.findIndex(r=>r.id===e.id);return{previous:n>0?t[n-1]:void 0,current:e,next:n<t.length-1?t[n+1]:void 0}}const Qo=u.forwardRef(({gripHandleProps:e,isDragging:t=!1,...n},r)=>{const{previous:o,current:i,next:s}=hl(),c=je(),a=Ce(),[l,d]=il("todo-expanded"),[f,p]=u.useState(!1);return u.useEffect(()=>{t&&d(!1)},[t]),h.jsxs(h.Fragment,{children:[h.jsx(vo,{onConfirm:()=>a(fs({groupId:i.id,todoId:c.id})),open:f,setOpen:p,title:"Удаление задачи",message:"Вы точно хотите удалить задачу?"}),h.jsxs("article",{className:Pe.card,ref:r,...n,"data-dragged":t,children:[h.jsxs("div",{className:Pe.headerBlock,children:[h.jsx(zn,{variant:"all",...e}),h.jsx(kt,{onValueUpdate:y=>a(xr({groupId:i.id,todo:{...c,title:y}})),value:c.title,required:!0,element:(y,v,x,S)=>h.jsx(_t,{className:Pe.titleField,value:y,onClick:v,onChange:x,onBlur:S,label:"Заголовок",plainable:!0})}),h.jsx(Pn,{toogled:l,onClick:()=>d(y=>!y),elementOff:h.jsx(lo,{}),elementOn:h.jsx(uo,{})}),h.jsxs(Et.Root,{children:[o&&h.jsxs(Et.Action,{onClick:m,children:[o.title,h.jsx(qs,{})]}),s&&h.jsxs(Et.Action,{onClick:g,children:[s?.title,h.jsx(Js,{})]}),h.jsxs(Et.Action,{onClick:()=>p(!0),children:["Удалить",h.jsx(ho,{})]})]})]}),h.jsx(po,{expanded:l,children:h.jsxs("div",{className:Pe.detailsBlock,children:[h.jsx(kt,{onValueUpdate:y=>a(xr({groupId:i.id,todo:{...c,content:y}})),value:c.content,element:(y,v,x,S)=>h.jsx(_t,{value:y,onClick:v,onChange:x,onBlur:S,label:"Описание",fallback:"Нет описания",plainable:!0,allowMultiline:!0})}),h.jsxs("div",{className:Pe.todoStepsBlock,children:[h.jsx(fl,{}),h.jsxs(At,{className:"small",onClick:()=>a(hs(i.id,c.id)),children:["Добавить шаг",h.jsx(at,{})]})]})]})}),h.jsx(qo,{mode:"show",className:Pe.tagsBlock,tagsData:[]})]})]});function g(){a(Rn({fromGroupId:i.id,toGroupId:s.id,fromTodoId:c.id,mode:"prepend"}))}function m(){a(Rn({fromGroupId:i.id,toGroupId:o.id,fromTodoId:c.id,mode:"prepend"}))}});function pl(){const e=je(),{attributes:t,listeners:n,setNodeRef:r,transform:o,transition:i,isDragging:s}=Hn({id:e.id}),c={transform:se.Translate.toString(o),transition:i};return h.jsx(Qo,{ref:r,style:c,isDragging:s,gripHandleProps:{...t,...n}})}function gl(){const e=Ie();return h.jsx(Kn,{strategy:Vn,items:e.todos,id:e.id,children:h.jsx(Yn,{children:e.todos.map(t=>h.jsx(mo,{todoData:t,children:h.jsx(pl,{})},t.id))})})}function vl(){const e=Ie(),t=Ce(),[n,r]=u.useState(!1),{setNodeRef:o}=Fo({id:e.id});u.useEffect(()=>{r(e.todos.length!==0)},[e.todos.length]);const i=e.todos.length===0;return h.jsxs("div",{className:rn.todoGroupDisplay,ref:o,children:[h.jsxs("div",{className:rn.headerBlock,children:[h.jsx(Pn,{disabled:i,toogled:n,onClick:()=>r(c=>!c),elementOff:h.jsx(lo,{}),elementOn:h.jsx(uo,{})}),h.jsx("h2",{children:e.title}),h.jsx(Qt,{className:rn.counter,color:e.color,children:e.todos.length}),h.jsx($e,{onClick:s,children:h.jsx(at,{})})]}),h.jsx(po,{expanded:n,children:h.jsx(gl,{})})]});function s(){r(!0),t(ds(e.id))}}function yl(e){const[t,n]=u.useState(e),r=u.useRef(t);return[t,i=>{r.current=i,n(i)},r]}function ml(){const e=Vt(l=>l.todos),t=Ce(),[n,r,o]=yl(null);return h.jsxs(Xn,{collisionDetection:Oc,onDragStart:s,onDragEnd:a,onDragOver:c,children:[h.jsx("div",{className:gi.todoGroupList,children:e.map(l=>h.jsx(Or,{groupData:l,children:h.jsx(vl,{})},l.id))}),h.jsx(za,{children:n&&h.jsx(Or,{groupData:n.group,children:h.jsx(mo,{todoData:n.todo,children:h.jsx(Qo,{})})})})]});function i(l,d){if(!o.current)return;const f=n?.group?.id,p=l.over?.data.current?.sortable?.containerId??l.over?.id;if(!p)return;const g=n?.todo?.id,m=l.over?.data.current?l.over?.id:void 0;(f!==p||d==="end"&&m&&g!==m)&&(console.log(p,g,m),t(Rn({fromGroupId:f,fromTodoId:g,toGroupId:p,toTodoId:m})),r(d==="over"?{todo:o.current.todo,group:e.find(y=>y.id===p)}:null))}function s(l){const d=l.active.data.current?.sortable.containerId,f=l.active.id,p=e.find(m=>m.id===d),g=p.todos.find(m=>m.id===f);r({todo:g,group:p})}function c(l){i(l,"over")}function a(l){i(l,"end")}}function wl(){return h.jsx(Ps,{store:jn,children:h.jsx(ml,{})})}export{wl as default};
